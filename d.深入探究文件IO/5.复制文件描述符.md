<font size=4 color=#D8650D face="微软雅黑">

# 复制文件描述符

+ Brurne Shell 的 I/O 重定向语法 2>&1, 通知shell把标准错误重定向到标准输出, 因此, 下面的命令将把标准输出和标准错误写入result.log文件:
	
		$ > ./myscript > results.log 2 > &1

+ shell通过复制文件描述符2实现了标准错误的重定向操作, 因此文件描述符2与文件描述符1指向同一个打开文件句柄, 可以通过dup()和dup2()来实现此功能
+ 要满足shell的这一要求, 仅仅简单的打开results.log文件两次是远远不够的, 首先两个文件描述符不能共享相同的文件偏移量, 因此有可能导致相互覆盖彼此的输出, 在这打开的文件不一定就是磁盘文件
+ 下面命令, 标准错误就将和标准输出一起送达同一管道:

		$ ./myscript 2>&1 | less

+ dup()调用赋值一个打开你的文件描述符oldfd, 并返回一个新描述符, 二者都指向同一打开的文件句柄, 系统会保证新描述符一定是编号值最低的未使用文件描述符

```c
#include <unistd.h>

int dup(int oldfd);

Returns new file descriptor on success, or -1 on error
```



