<font size=4 color=#4B2296 face="微软雅黑">

# 栈和栈帧

函数的调用和返回使用栈的增长和收缩呈线性, x86-32体系架构之上的Linux, 栈驻留在内存的高端并向下增长(朝堆的方向).专用寄存器--栈指针(stack pointer), 用于跟踪当前栈顶. 每次调用函数时, 会在栈上新分配一帧, 每当函数返回时, 再从栈上将此帧移去

***虽然栈向下增长, 但仍将站的增长端称为栈顶, 因为抽象地来说, 情况本就如此. 栈的实际增长方向是个实现细节***
***就虚拟内存而言, 分配栈帧后, 栈段的大小将会增长, 但在大多数Linux实现中, 释放这些栈帧后, 栈的大小并未减少, 当谈论栈段的增长和收缩时, 只是从逻辑视角来看待栈帧在栈中的增减情况***

+ 有时, 会用用户栈来表示此处讨论的栈, 以便与内核栈区分开来, 内核栈是每个进程保留在内核内存中的内存区域, 在执行系统调用的过程中共内部函数调用使用, 每个用户栈帧包括如下信息:
	+ **函数实参和局部变量:** 由于这些变量都实在调用函数时自动创建的, 在C语言中称其为自动变量, 函数返回时将自动销毁这些变量, 这也是自动变量与静态(以及全局)变量主要的语义区别, 后者与函数执行无关, 且长期存在
	+ **函数调用的连接信息:** 没和函数都会用到一些CPU寄存器, 比如程序计数器, 其指向吓一跳将要执行的机器语言指令, 每当 一函数调用另一函数时. 会在被调用函数的栈帧中保存这些寄存器的副本, 以便函数返回时能为函数调用者将寄存器恢复原状
+ 因为函数能够嵌套调用, 所以栈中可能有多个栈帧

**一个进程栈的示例: **
![一个进程栈的示例]("/images/3.png")
