<font size=4 color=green face="微软雅黑">

# 示例程序注意事项

---

## 1. 命令行选项及参数

---

传统的UNIX命令行选项由一个连字符(-),标识选项的英文字母,以及一个可选参数组成

可使用标准库函数getopt()对命令行选项进行解析

在以--help选项调用程序时,会显示用法信息,就命令行选项和参数的语法加以说明

## 2. 常用函数及头文件

---

+ 常用的头文件
	```c

	#include <sys/types.h> 	/* Type definitions used by many programs */
	#include <stdio.h>		 /* Standard I/O functions */
	#include <stdlib.h>		/* Prototypes of commonly used library functions, plus EXIT_SUCCESS and EXIT_FAILURE constans */
	#include <unistd.h>		/* Prototypes for many system calls */
	#include <errno.h>		 /* Declares errno and defines error constants */
	#include <string.h>		/* Commonly used string-handling functions */

	#include "get_num.h"	   /* Declares our functions for handling numeric arguments (getInt(), getLong()) */
	#include "error_functions.h"	/* Declares our error-handling functions */

	typedef enum { FALSE, TRUE } Boolean;

	#define min(m, n) ((m) < (n) ? (m) : (n))
	#define max(m, n) ((m) > (n) ? (m) : (n))

 	```

## 3. 错误诊断函数

---
### <font color=blue>error_functions.h 常用错误处理函数的声明</font>
```c
#ifndef ERROR_FUNCTIONS_H
#define ERROR_FUNCTIONS_H

void errMsg(const char *format, ...);

#ifdef __GNUC__

/* 
This macro stops 'gcc -Wall' complainint that "control reaches end
of non-void function" if we use the following functions to terminare
main() or some other non-void function
*/

#define NORETURN __attribute__ ((__noreturn__))
#else
#define NORETURN
#endif

void errExit(const char *format, ...) NORETURN;

void err_exit(const char *format, ...) NORETURN;

void errExitEN(int errnum, const char *format, ...) NORETURN;

void fatal(const char *format, ...) NORETURN;

void usageErr(const char *format, ...) NORETURN;

void cmdLineErr(const char *format, ...) NORETURN;

#endif
```
使用errMsg(), errExit(), err_exit(), errExitEN()函数

以诊断调用系统调用和库函数是所发生的错误

+ 函数errMsg()会在标准错误设备上打印消息,除了将一个终止换行符自动追加到输出字符串尾部以外,该函数的参数列表与printf()所用相同.

+ errMsg()函数会打印出与当前errno值相对应的错误文本,其中包括了错误名以及有strerror()返回的错误描述,外加有参数列表指定的格式化输出

+ errExit()函数的操作方式与errMsg()相似,只是还会以两种方式之一来终止程序:
	1. 调用exit()退出
	2. 若将环境变量EF_DUMPCORE定义为非空字符串,则调用abort()退出,同时生成核心转储文件,共调试器调试之用

+ err_exit()函数类似于errExit() 存在两个差异:
	1. 打印错误消息之前, err_exit()不会刷新标准输出
	2. err_exit()终止进程使用的是_exit(),而不是exit().这一退出方式,略去了对stdio缓冲区的刷新以及对退出处理程序的调用

+ errExitEN()函数与errExit()大体相同, 区别在于:
	+ errExitEN()指挥打印与errnum参数中给定的错误号相对应的文本
	

## 4. 解析数值型命令行参数的函数
